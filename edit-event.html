<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INTI - Event Management System</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="style.css" rel="stylesheet">
</head>
<body data-page="edit-event.html">
    <!-- navbar will be injected here -->
    <div id="main-navbar"></div>

    <!-- Page header (red) -->
    <header class="page-header">
      <div class="container px-2 py-4">
          <h2 class="m-0 text-white">Edit Event</h2>
      </div>
    </header>

    <main class="py-5">
      <div class="container">
        <form class="create-event-form" action="">
          <div class="mb-4">
            <label class="form-label fw-semibold">What's the name of your event? <span class="text-danger">*</span></label>
            <input id="eventTitle" class="form-control mb-2" type="text" placeholder="Event Title" value="Fun Games for Happy Minds" required>
            <textarea id="eventDescription" class="form-control" rows="4" placeholder="Event Description" required>Join us for an exciting afternoon filled with laughter, games, and relaxation! Fun Games for Happy Minds is a cheerful carnival-themed event designed to help students unwind, meet new friends, and de-stress from their busy schedules.

Expect thrilling mini games, lucky draws, and interactive booths that bring joy and smiles to everyone. And yes—food trucks will be there with tasty snacks and cool drinks to keep your energy high!

Whether you're coming with friends or flying solo, this event promises a fun-filled experience where happiness takes center stage. Don't miss out—come play, eat, and enjoy!</textarea>
          </div>

          <div class="mb-4">
            <label class="form-label fw-semibold">When does your event start and end? <span class="text-danger">*</span></label>
            <div class="row g-2">
              <div class="col-md-4">
                <input id="eventDate" class="form-control" type="date" value="2025-10-26" required>
              </div>
              <div class="col-md-4 d-flex gap-2">
                <input id="eventStartTime" class="form-control" type="time" placeholder="Start time" value="12:00" required>
              </div>
              <div class="col-md-4 d-flex gap-2">
                <input id="eventEndTime" class="form-control" type="time" placeholder="End time" value="16:00" required>
              </div>
            </div>
          </div>

          <div class="mb-4">
            <label class="form-label fw-semibold">Where is it located? <span class="text-danger">*</span></label>
            <select id="campus" class="form-select" required>
              <option value="">Select campus</option>
              <option value="1">INTI International University</option>
              <option value="2" selected>INTI International College Subang</option>
              <option value="3">INTI International College Penang</option>
              <option value="4">INTI International College Sabah</option>
            </select>
          </div>

          <div class="mb-4">
            <label class="form-label fw-semibold">What's the capacity for your event? <span class="text-danger">*</span></label>
            <div class="text-muted mb-2">Event capacity refers to the maximum number of registrants allowed.</div>
            <input id="eventCapacity" class="form-control w-25" type="number" min="10" placeholder="Capacity" value="150" required>
          </div>

          <div class="mb-4">
            <label class="form-label fw-semibold">Upload Event Image <span class="text-danger">*</span></label>
            <div class="mb-3">
              <img id="currentImage" src="img/FunGamesforHappyMinds.jpg" alt="Current event image" class="img-thumbnail" style="max-width: 300px;">
            </div>
            <input id="eventImage" class="form-control form-control-file w-auto" type="file" accept="image/*">
            <div class="form-text">Leave empty to keep current image</div>
          </div>

          <div class="d-flex justify-content-end gap-3">
            <a href="manage.html" class="btn btn-outline-secondary">Cancel</a>
            <button class="btn btn-red" type="submit">Save changes</button>
          </div>
        </form>
      </div>
    </main>

    <!-- Bootstrap + navbar injector -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="javascript.js"></script>

    <script>
      (function () {
        const form = document.querySelector('.create-event-form');
        if (!form) return;

        // Handle image preview when user selects a new file
        const imageInput = document.getElementById('eventImage');
        const currentImage = document.getElementById('currentImage');
        
        if (imageInput && currentImage) {
          imageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
              const reader = new FileReader();
              reader.onload = function(event) {
                currentImage.src = event.target.result;
              };
              reader.readAsDataURL(file);
            }
          });
        }

        form.addEventListener('submit', function (e) {
          e.preventDefault();

          // disable submit to prevent duplicates
          const submitBtn = form.querySelector('button[type="submit"]');
          if (submitBtn) submitBtn.disabled = true;

          // redirect to manage page which will display the success toast
          setTimeout(function () {
            window.location.href = 'manage.html?updated=1';
          }, 150);
        }, { passive: false });
      })();
    </script>
  </body>
</html>